<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Trading Predictor</title>
    <style>
        :root {
            --primary-color: #6a5acd;
            --secondary-color: #9370db;
            --success-color: #4caf50;
            --danger-color: #f44336;
            --warning-color: #ff9800;
            --info-color: #2196f3;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .prediction-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 200px;
            margin: 20px 0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .prediction-value {
            font-size: 3rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .prediction-text {
            font-size: 1.2rem;
            text-align: center;
        }
        
        .btn {
            display: inline-block;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #5f4dbb;
            transform: translateY(-2px);
        }
        
        .btn-lg {
            padding: 15px 30px;
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        select, input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .history-chart {
            height: 300px;
            width: 100%;
            background-color: #f9f9f9;
            border-radius: 8px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 30px;
            transition: all 0.5s ease;
        }
        
        .chart-label {
            position: absolute;
            bottom: -25px;
            width: 100%;
            text-align: center;
            font-size: 0.8rem;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .history-table th, .history-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .history-table th {
            background-color: #f2f2f2;
            font-weight: 600;
        }
        
        .history-table tr:hover {
            background-color: #f5f5f5;
        }
        
        .profit {
            color: var(--success-color);
            font-weight: bold;
        }
        
        .loss {
            color: var(--danger-color);
            font-weight: bold;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Color Trading Predictor</h1>
            <p class="subtitle">Advanced algorithm for color market predictions</p>
        </header>
        
        <div class="dashboard">
            <div class="card">
                <h2 class="card-title">Current Prediction</h2>
                <div class="prediction-display" id="predictionDisplay">
                    <div class="prediction-text">Next predicted color:</div>
                    <div class="prediction-value" id="predictionValue">-</div>
                    <div class="prediction-text" id="predictionConfidence">Confidence: -</div>
                </div>
                <button class="btn btn-primary btn-lg" id="predictBtn">Generate Prediction</button>
            </div>
            
            <div class="card">
                <h2 class="card-title">Prediction Parameters</h2>
                <div class="form-group">
                    <label for="marketSelect">Market Trend</label>
                    <select id="marketSelect">
                        <option value="random">Random</option>
                        <option value="upward">Upward</option>
                        <option value="downward">Downward</option>
                        <option value="volatile">Volatile</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="riskLevel">Risk Level</label>
                    <input type="range" id="riskLevel" min="1" max="10" value="5">
                    <span id="riskValue">5</span>
                </div>
                <div class="form-group">
                    <label for="historyDepth">History Depth (days)</label>
                    <input type="number" id="historyDepth" min="1" max="30" value="7">
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="tabs">
                <div class="tab active" data-tab="chart">Performance Chart</div>
                <div class="tab" data-tab="history">Trade History</div>
                <div class="tab" data-tab="stats">Statistics</div>
            </div>
            
            <div class="tab-content active" id="chartTab">
                <h3 class="card-title">Recent Performance</h3>
                <div class="history-chart" id="historyChart">
                    <!-- Chart bars will be added by JavaScript -->
                </div>
            </div>
            
            <div class="tab-content" id="historyTab">
                <h3 class="card-title">Trade History</h3>
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Predicted Color</th>
                            <th>Actual Color</th>
                            <th>Result</th>
                            <th>Confidence</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <!-- Table rows will be added by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div class="tab-content" id="statsTab">
                <h3 class="card-title">Performance Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="accuracyRate">-</div>
                        <div class="stat-label">Accuracy Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="successStreak">-</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalPredictions">-</div>
                        <div class="stat-label">Total Predictions</div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2023 Color Trading Predictor. This is for demonstration purposes only.</p>
            <p>Past performance is not indicative of future results.</p>
        </footer>
    </div>

    <script>
        // Available colors for prediction
        const colors = [
            { name: "Red", code: "#FF5252", emoji: "🔴" },
            { name: "Green", code: "#4CAF50", emoji: "🟢" },
            { name: "Blue", code: "#2196F3", emoji: "🔵" },
            { name: "Yellow", code: "#FFD600", emoji: "🟡" },
            { name: "Purple", code: "#9C27B0", emoji: "🟣" }
        ];
        
        // Trade history data
        let tradeHistory = [];
        
        // DOM elements
        const predictBtn = document.getElementById('predictBtn');
        const predictionValue = document.getElementById('predictionValue');
        const predictionDisplay = document.getElementById('predictionDisplay');
        const predictionConfidence = document.getElementById('predictionConfidence');
        const riskLevel = document.getElementById('riskLevel');
        const riskValue = document.getElementById('riskValue');
        const marketSelect = document.getElementById('marketSelect');
        const historyDepth = document.getElementById('historyDepth');
        const historyChart = document.getElementById('historyChart');
        const historyTableBody = document.getElementById('historyTableBody');
        const accuracyRate = document.getElementById('accuracyRate');
        const successStreak = document.getElementById('successStreak');
        const totalPredictions = document.getElementById('totalPredictions');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Load any saved history from localStorage
            loadHistory();
            
            // Set up event listeners
            predictBtn.addEventListener('click', generatePrediction);
            riskLevel.addEventListener('input', updateRiskValue);
            
            // Set up tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', switchTab);
            });
            
            // Generate some initial history if none exists
            if (tradeHistory.length === 0) {
                generateInitialHistory();
            }
            
            updateStats();
            renderChart();
            renderHistoryTable();
        });
        
        // Update the displayed risk value
        function updateRiskValue() {
            riskValue.textContent = riskLevel.value;
        }
        
        // Switch between tabs
        function switchTab(e) {
            const tabId = e.target.getAttribute('data-tab');
            
            // Update active tab
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            e.target.classList.add('active');
            
            // Update active content
            tabContents.forEach(content => {
                content.classList.remove('active');
                if (content.id === `${tabId}Tab`) {
                    content.classList.add('active');
                }
            });
        }
        
        // Generate a new prediction
        function generatePrediction() {
            // Show loading state
            predictionValue.textContent = "...";
            predictionConfidence.textContent = "Calculating...";
            predictBtn.disabled = true;
            
            // Simulate prediction calculation delay
            setTimeout(() => {
                const selectedRisk = parseInt(riskLevel.value);
                const marketTrend = marketSelect.value;
                const depth = parseInt(historyDepth.value);
                
                // Generate a prediction based on parameters
                const prediction = calculatePrediction(selectedRisk, marketTrend, depth);
                
                // Update the display
                predictionValue.textContent = `${prediction.color.emoji} ${prediction.color.name}`;
                predictionValue.style.color = prediction.color.code;
                predictionConfidence.textContent = `Confidence: ${prediction.confidence}%`;
                
                // Animate the prediction display
                predictionDisplay.style.transform = 'scale(1.05)';
                predictionDisplay.style.boxShadow = `0 0 20px ${prediction.color.code}80`;
                setTimeout(() => {
                    predictionDisplay.style.transform = 'scale(1)';
                    predictionDisplay.style.boxShadow = 'none';
                }, 500);
                
                // Generate an actual result (simulating what really happens in the market)
                const actual = generateActualResult(prediction, marketTrend);
                
                // Add to history
                addToHistory(prediction, actual);
                
                // Re-enable the button
                predictBtn.disabled = false;
            }, 1000);
        }
        
        // Calculate a prediction based on parameters
        function calculatePrediction(risk, trend, depth) {
            // This is a simplified prediction algorithm
            // In a real app, this would be much more sophisticated
            
            let weights = [];
            
            // Base weights (equal chance)
            colors.forEach(color => {
                weights.push({ color, weight: 1 });
            });
            
            // Adjust based on risk level
            if (risk > 7) {
                // High risk favors less common colors
                weights[0].weight *= 0.8; // Red
                weights[1].weight *= 0.8; // Green
                weights[2].weight *= 1.2; // Blue
                weights[3].weight *= 1.5; // Yellow
                weights[4].weight *= 1.5; // Purple
            } else if (risk < 4) {
                // Low risk favors more common colors
                weights[0].weight *= 1.5; // Red
                weights[1].weight *= 1.5; // Green
                weights[2].weight *= 0.8; // Blue
                weights[3].weight *= 0.5; // Yellow
                weights[4].weight *= 0.5; // Purple
            }
            
            // Adjust based on market trend
            switch(trend) {
                case 'upward':
                    weights[1].weight *= 1.3; // Favor Green
                    weights[3].weight *= 1.2; // Favor Yellow
                    break;
                case 'downward':
                    weights[0].weight *= 1.3; // Favor Red
                    weights[2].weight *= 1.1; // Slightly favor Blue
                    break;
                case 'volatile':
                    weights[0].weight *= 1.5; // Favor Red
                    weights[3].weight *= 1.5; // Favor Yellow
                    weights[1].weight *= 0.7; // Reduce Green
                    break;
            }
            
            // Calculate total weight
            const totalWeight = weights.reduce((sum, item) => sum + item.weight, 0);
            
            // Generate a random number weighted by our adjustments
            let random = Math.random() * totalWeight;
            let selectedColor = colors[0];
            let sum = 0;
            
            for (const item of weights) {
                sum += item.weight;
                if (random <= sum) {
                    selectedColor = item.color;
                    break;
                }
            }
            
            // Calculate confidence (simplified)
            let confidence = 50 + (Math.random() * 30); // Base 50-80%
            
            // Adjust confidence based on parameters
            confidence += (risk - 5) * 2; // Higher risk can increase confidence
            if (trend === 'random') confidence -= 5;
            if (depth > 14) confidence += 5;
            
            // Ensure confidence is within bounds
            confidence = Math.max(30, Math.min(95, confidence));
            
            return {
                color: selectedColor,
                confidence: Math.round(confidence),
                timestamp: new Date()
            };
        }
        
        // Generate what actually happens in the market
        function generateActualResult(prediction, trend) {
            // Base probability based on prediction confidence
            let probability = prediction.confidence / 100;
            
            // Adjust based on market trend
            switch(trend) {
                case 'upward':
                    if (prediction.color.name === 'Green') probability += 0.15;
                    if (prediction.color.name === 'Red') probability -= 0.1;
                    break;
                case 'downward':
                    if (prediction.color.name === 'Red') probability += 0.15;
                    if (prediction.color.name === 'Green') probability -= 0.1;
                    break;
                case 'volatile':
                    // More random in volatile markets
                    probability = 0.5 + (Math.random() - 0.5) * 0.3;
                    break;
            }
            
            // Ensure probability is within bounds
            probability = Math.max(0.2, Math.min(0.9, probability));
            
            // Determine if prediction was correct
            const isCorrect = Math.random() < probability;
            
            // Return the actual color
            if (isCorrect) {
                return prediction.color;
            } else {
                // Pick a different color randomly
                const otherColors = colors.filter(c => c.name !== prediction.color.name);
                const randomIndex = Math.floor(Math.random() * otherColors.length);
                return otherColors[randomIndex];
            }
        }
        
        // Add a prediction to history
        function addToHistory(prediction, actual) {
            const entry = {
                date: prediction.timestamp,
                predicted: prediction.color,
                actual: actual,
                confidence: prediction.confidence,
                isCorrect: prediction.color.name === actual.name
            };
            
            tradeHistory.unshift(entry); // Add to beginning of array
            saveHistory();
            updateStats();
            renderChart();
            renderHistoryTable();
        }
        
        // Generate some initial history
        function generateInitialHistory() {
            const now = new Date();
            const daysAgo = 14;
            
            for (let i = daysAgo; i >= 0; i--) {
                const date = new Date(now);
                date.setDate(date.getDate() - i);
                
                // Simple pattern for demo purposes
                let colorIndex = i % colors.length;
                if (i > 7) colorIndex = (i + 1) % colors.length;
                
                const prediction = {
                    color: colors[colorIndex],
                    confidence: 60 + Math.floor(Math.random() * 20),
                    timestamp: date
                };
                
                // Make it mostly correct but with some variation
                let actual;
                if (Math.random() > 0.3) {
                    actual = prediction.color;
                } else {
                    const otherColors = colors.filter(c => c.name !== prediction.color.name);
                    const randomIndex = Math.floor(Math.random() * otherColors.length);
                    actual = otherColors[randomIndex];
                }
                
                tradeHistory.push({
                    date: date,
                    predicted: prediction.color,
                    actual: actual,
                    confidence: prediction.confidence,
                    isCorrect: prediction.color.name === actual.name
                });
            }
            
            saveHistory();
        }
        
        // Save history to localStorage
        function saveHistory() {
            // Only keep the last 30 entries
            if (tradeHistory.length > 30) {
                tradeHistory = tradeHistory.slice(0, 30);
            }
            
            localStorage.setItem('colorTradingHistory', JSON.stringify(tradeHistory));
        }
        
        // Load history from localStorage
        function loadHistory() {
            const savedHistory = localStorage.getItem('colorTradingHistory');
            if (savedHistory) {
                try {
                    const parsed = JSON.parse(savedHistory);
                    // Convert string dates back to Date objects
                    tradeHistory = parsed.map(item => ({
                        ...item,
                        date: new Date(item.date),
                        predicted: colors.find(c => c.name === item.predicted.name),
                        actual: colors.find(c => c.name === item.actual.name)
                    }));
                } catch (e) {
                    console.error('Failed to load history', e);
                    tradeHistory = [];
                }
            }
        }
        
        // Update statistics display
        function updateStats() {
            if (tradeHistory.length === 0) return;
            
            // Calculate accuracy rate
            const correctPredictions = tradeHistory.filter(entry => entry.isCorrect).length;
            const accuracy = (correctPredictions / tradeHistory.length) * 100;
            accuracyRate.textContent = `${accuracy.toFixed(1)}%`;
            
            // Calculate current streak
            let streak = 0;
            for (const entry of tradeHistory) {
                if (entry.isCorrect) {
                    streak++;
                } else {
                    break;
                }
            }
            successStreak.textContent = streak;
            
            // Total predictions
            totalPredictions.textContent = tradeHistory.length;
        }
        
        // Render the history chart
        function renderChart() {
            // Clear existing chart
            historyChart.innerHTML = '';
            
            // Get the last 10 entries for the chart
            const displayHistory = tradeHistory.slice(0, 10).reverse();
            if (displayHistory.length === 0) return;
            
            // Calculate maximum value for scaling
            const maxValue = Math.max(...displayHistory.map(entry => entry.confidence));
            
            // Create bars for each entry
            displayHistory.forEach((entry, index) => {
                const barHeight = (entry.confidence / maxValue) * 250;
                const barColor = entry.isCorrect ? '#4CAF50' : '#F44336';
                
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${barHeight}px`;
                bar.style.backgroundColor = barColor;
                bar.style.left = `${index * 40 + 20}px`;
                
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = entry.date.getDate() + '/' + (entry.date.getMonth() + 1);
                
                historyChart.appendChild(bar);
                historyChart.appendChild(label);
            });
        }
        
        // Render the history table
        function renderHistoryTable() {
            // Clear existing rows
            historyTableBody.innerHTML = '';
            
            // Add rows for each history entry
            tradeHistory.forEach(entry => {
                const row = document.createElement('tr');
                
                // Format date
                const dateStr = entry.date.toLocaleDateString() + ' ' + entry.date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                // Format result
                const resultClass = entry.isCorrect ? 'profit' : 'loss';
                const resultText = entry.isCorrect ? 'Correct' : 'Incorrect';
                
                row.innerHTML = `
                    <td>${dateStr}</td>
                    <td style="color: ${entry.predicted.code}">${entry.predicted.emoji} ${entry.predicted.name}</td>
                    <td style="color: ${entry.actual.code}">${entry.actual.emoji} ${entry.actual.name}</td>
                    <td class="${resultClass}">${resultText}</td>
                    <td>${entry.confidence}%</td>
                `;
                
                historyTableBody.appendChild(row);
            });
        }
    </script>
</body>
</html>
